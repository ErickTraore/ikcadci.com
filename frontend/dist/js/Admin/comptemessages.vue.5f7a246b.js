(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["/Admin/comptemessages.vue"],{5328:function(e,t,s){"use strict";(function(e){var a=s("2b0e"),n=(s("9490"),s("bc3a")),i=s.n(n),o=s("130e"),c=s("4380"),l=s("5a30"),r=s.n(l),d=s("2f62");const u=s("df7c"),g="undefined"===typeof e.pkg;g?e.cwd():u.dirname(e.execPath),s("9490");s("30dc");a["a"].use(c["a"]),a["a"].use(o["a"],i.a),t["a"]={name:"Home",computed:{...Object(d["b"])(["imageExist"])},data(){return{myId:Number,idImage:"",testName:Boolean,file:Blob,errors:[],message:{title:null,content:null,attachment:null},image:"",selectedFile:null,messages:[],likes:0,dislikes:0,posts:{title:null,content:null,attachment:""}}},created(){let e=localStorage.getItem("obj"),t=JSON.parse(e),s=t.myToken,a=t.myId;i.a.get("https://212.227.142.69:3000/api/messagesAdmin/",{headers:{Authorization:s}}).then(e=>{this.myId=a,this.messages=e.data}).catch(e=>console.log(e()))},methods:{post:function(e){let t=localStorage.getItem("obj"),s=JSON.parse(t),a=s.myToken;this.axios.post("https://212.227.142.69:3000/api/messages/new/",e,{headers:{Authorization:a}}).then(e=>{this.message=e.data,i.a.get("https://212.227.142.69:3000/api/messages/").then(e=>{this.messages=e.data}).catch(e=>console.log(e()))})},onFileSelected(e){this.selectedFile=e.target.files[0];var t=e.target.files||e.dataTransfer.files;t.length&&this.createImage(t[0])},createImage(e,t){new Image;var s=new FileReader,a=this;s.onload=e=>{a.image=e.target.result},s.readAsDataURL(e),this.image||this.pushImage()},pushImage(e){let t=localStorage.getItem("obj"),a=JSON.parse(t),n=a.myToken;s("3022");var o=new r.a,c=document.querySelector("#file");console.log("Mon imageFile[0] :",c.files[0]),o.append("file",c.files[0]),i.a.post("https://212.227.142.69:3000/api/messages/upload",o,{headers:{Authorization:n,"Content-Type":"multipart/form-data"}}).then(e=>(console.log("valeure reçu par le back:",e.data),console.log("valeure res.data.idImage:",e.data.idImage),e.data.idImage)).then((function(e){const t=document.querySelector("#attachment");t.value="https://212.227.142.69:3000/images/"+e,t.dispatchEvent(new Event("input")),response.status(200).json({idImage:e})})).catch((function(e){e.statusCode=401}))},doDelete:function(e){let t=localStorage.getItem("obj"),s=JSON.parse(t),a=s.myToken;this.axios.post("https://212.227.142.69:3000/api/messages/"+e+"/del",null,{headers:{Authorization:a}}).then(e=>{console.log("Deleting message-1"),i.a.get("https://212.227.142.69:3000/api/messages/").then(e=>{console.log("Deleting message"),this.messages=e.data,this.resetForm(),res.status(200).json(this.messages)}).catch((function(e){e.statusCode=401}))}).catch((function(e){e.statusCode=401}))}}}}).call(this,s("4362"))},"601b":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"group__header__body"},e._l(e.messages,(function(t){return s("div",{key:t.id,staticClass:"container"},[s("div",{staticClass:"group__header__body__first"},[s("div",{staticClass:"group__header__body__first__in"},[s("figure",[s("img",{attrs:{src:t.attachment}})]),s("b",[e._v("Mon id: "+e._s(e.myId))]),e._v(" "),s("br"),s("b",[e._v("Mon messageUserId: "+e._s(t.UserId))]),e._v(" "),s("br"),s("b",[e._v(e._s(t.User.username))]),e._v(" à écrit le "+e._s(e._f("dateFormat")(new Date(t.createdAt),"DD/MM/YYYY"))+" à "+e._s(e._f("dateFormat")(new Date(t.createdAt),"hh:mm"))+" : "),s("br"),s("b",[e._v(e._s(t.title))]),s("br")]),s("div",{staticClass:"group__header__body__first__down"},[e._v(" "+e._s(t.content)),s("br")])]),s("div",{staticClass:"position like-buttons group__header__body__second",attrs:{"_ngcontent-cpa-c6":""}},[s("div",{staticClass:"left"},[s("div",{staticClass:"likes",attrs:{"_ngcontent-cpa-c6":""}},[s("button",{attrs:{id:"dolike"},on:{click:function(s){return e.doLike(t.id)}}},[s("i",{staticClass:"like fa-thumbs-up fa-lg far",attrs:{"_ngcontent-cpa-c6":""}})]),s("span",{staticClass:"spanLikes",attrs:{"_ngcontent-cpa-c6":""}},[e._v(e._s(t.likes))])]),s("div",{staticClass:"dislikes",attrs:{"_ngcontent-cpa-c6":""}},[s("button",{on:{click:function(s){return e.doDislike(t.id)}}},[s("i",{staticClass:"dislike fa-thumbs-down fa-lg far",attrs:{"_ngcontent-cpa-c6":""}})]),s("span",{staticClass:"spanDislikes",attrs:{"_ngcontent-cpa-c6":""}},[e._v(e._s(t.dislikes))])])]),s("div",{staticClass:"right"},[s("div",{staticClass:"dislikes",attrs:{"_ngcontent-cpa-c6":""}},[s("button",{staticClass:"colorRed",on:{click:function(s){return e.doDelete(t.id)}}},[e._v(" Supprimer votre message ")])])])]),s("ul")])})),0)])},n=[],i=s("5328"),o=i["a"],c=(s("ead0"),s("2877")),l=Object(c["a"])(o,a,n,!1,null,"51537b2c",null);t["default"]=l.exports},"86d5":function(e,t,s){},ead0:function(e,t,s){"use strict";s("86d5")}}]);
//# sourceMappingURL=comptemessages.vue.5f7a246b.js.map