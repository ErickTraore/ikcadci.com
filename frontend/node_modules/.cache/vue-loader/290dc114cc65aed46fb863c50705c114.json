{"remainingRequest":"/var/www/html/ikcadci.com/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/ikcadci.com/frontend/src/views/Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/ikcadci.com/frontend/src/views/Profile.vue","mtime":1648003615988},{"path":"/var/www/html/ikcadci.com/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/var/www/html/ikcadci.com/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/ikcadci.com/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKLy8gaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKCiAgZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBwcm9maWxlOiAnJywKICAgICAgICBwb3N0czogewogICAgICAgICAgdXNlcm5hbWU6ICcnLAogICAgICAgICAgZW1haWw6ICcnLAogICAgICAgICAgYmlvOiAnJywKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICBsZXQgb2JqTXlTZXNzaW9uID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIm9iaiIpCiAgICAgIGxldCBteVN0b3JhZ2VUb2tlbiA9IEpTT04ucGFyc2Uob2JqTXlTZXNzaW9uKQogICAgICBsZXQgdG9rZW4gPSBteVN0b3JhZ2VUb2tlbi5teVRva2VuOwogICAgICBheGlvcwogICAgICAgIC5nZXQoJ2h0dHA6Ly8yMTIuMjI3LjE0Mi42OTozMDAwL2FwaS91c2Vycy9tZS8nLCB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogdG9rZW4KICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMucHJvZmlsZSA9IHJlc3BvbnNlLmRhdGEKICAgICAgICAgIHRoaXMudGVzdFVzZXIgPSB0aGlzLnByb2ZpbGUudGVzdFVzZXIKICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMudGVzdFVzZXIpIC8vIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJiZWZvcmVMb2dnZWQiKQogICAgICBpZih0aGlzLnRlc3RVc2VyID09ICd0ZXN0T2snKXsKICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJiZWZvcmVMb2dnZWQiKQogICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coZXJyb3IoKSkpCiAgICB9LAogICAgbWV0aG9kczogewogICAgICBwb3N0RGF0YShlKSB7CiAgICAgICAgbGV0IG9iak15U2Vzc2lvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJvYmoiKQogICAgICAgIGxldCBteVN0b3JhZ2VUb2tlbiA9IEpTT04ucGFyc2Uob2JqTXlTZXNzaW9uKQogICAgICAgIGxldCB0b2tlbiA9IG15U3RvcmFnZVRva2VuLm15VG9rZW47CgogICAgICAgIHRoaXMuYXhpb3MucHV0KCdodHRwOi8vMjEyLjIyNy4xNDIuNjk6MzAwMC9hcGkvdXNlcnMvbWUvJywgdGhpcy5wb3N0cywgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IHRva2VuCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgdGhpcy5wcm9maWxlLmJpbyA9IHJlc3BvbnNlLmRhdGEuYmlvCiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKGVycm9yKCkpKQoKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIH0sIAogICAgICBkZWxQcm9maWwoKSB7CiAgICAgICAgbGV0IG9iak15U2Vzc2lvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJvYmoiKQogICAgICAgIGxldCBteVN0b3JhZ2VUb2tlbiA9IEpTT04ucGFyc2Uob2JqTXlTZXNzaW9uKQogICAgICAgIGxldCB0b2tlbiA9IG15U3RvcmFnZVRva2VuLm15VG9rZW47CgogICAgICAgIHRoaXMuYXhpb3MucG9zdCgnaHR0cDovLzIxMi4yMjcuMTQyLjY5OjMwMDAvYXBpL3VzZXJzL2RlbFByb2ZpbCcsIG51bGwsIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiB0b2tlbgogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIHRoaXMucHJvZmlsZSA9IHJlc3BvbnNlLmRhdGEKICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coZXJyb3IoKSkpCgogICAgICB9CiAgICB9CiAgfQoK"},{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Profile.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class='group'>\n        <div class='group__header'>\n            <div id=\"app\">\n                <div class='group__header__body'>\n                    <h2>Mon profil</h2>\n                    <div>Pseudo: {{ profile.username }}</div>\n                    <div>Email: {{ profile.email }}</div>\n                    <div>Biographie: {{ profile.bio }}</div>\n                </div>\n            </div>\n            <form @submit=\"postData\" method=\"post\">\n                <div class='group__header__body'>\n                    <label>Mettre Ã  jour ma biographie</label> <br> <br>\n                    <textarea\n                            id=\"bio\"\n                            name=\"bio\"\n                            placeholder=\"Biographie\"\n                            type=\"text\"\n                            v-model=\"posts.bio\"\n                    ></textarea> <br> <br>\n                    <button type=\"submit\">Soumettre</button>\n                    <button @click=\"delProfil()\">Supprimer</button>\n                </div>\n            </form>\n        </div>\n\n    </div>\n</template>\n\n<script>\n  import axios from 'axios';\n// import { mapState } from 'vuex';\n\n  export default {\n    data() {\n      return {\n        profile: '',\n        posts: {\n          username: '',\n          email: '',\n          bio: '',\n        }\n      }\n    },\n    created() {\n      let objMySession = localStorage.getItem(\"obj\")\n      let myStorageToken = JSON.parse(objMySession)\n      let token = myStorageToken.myToken;\n      axios\n        .get('http://212.227.142.69:3000/api/users/me/', {\n          headers: {\n            'Authorization': token\n          }\n        })\n        .then(response => {\n          this.profile = response.data\n          this.testUser = this.profile.testUser\n          console.log(this.testUser) // this.$store.dispatch(\"beforeLogged\")\n      if(this.testUser == 'testOk'){\n       this.$store.dispatch(\"beforeLogged\")\n      }\n        })\n        .catch(error => console.log(error()))\n    },\n    methods: {\n      postData(e) {\n        let objMySession = localStorage.getItem(\"obj\")\n        let myStorageToken = JSON.parse(objMySession)\n        let token = myStorageToken.myToken;\n\n        this.axios.put('http://212.227.142.69:3000/api/users/me/', this.posts, {\n          headers: {\n            'Authorization': token\n          }\n        })\n          .then(response => {\n            this.profile.bio = response.data.bio\n          })\n          .catch(error => console.log(error()))\n\n        e.preventDefault();\n      }, \n      delProfil() {\n        let objMySession = localStorage.getItem(\"obj\")\n        let myStorageToken = JSON.parse(objMySession)\n        let token = myStorageToken.myToken;\n\n        this.axios.post('http://212.227.142.69:3000/api/users/delProfil', null, {\n          headers: {\n            'Authorization': token\n          }\n        })\n          .then(response => {\n            this.profile = response.data\n          })\n          .catch(error => console.log(error()))\n\n      }\n    }\n  }\n\n</script>\n<style scoped>\n    .group {\n        height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: space-evenly;\n    }\n\n    * {\n        box-sizing: border-box;\n    }\n\n    .group__header {\n        font-size: 1.2rem;\n        align-items: center;\n        padding: 1rem;\n        border-radius: 2rem;\n          background-color: rgb(35, 49, 82);\n\n\n\n    }\n\n    .group__header__body {\n        padding: 1rem;\n        background-color: rgba(196, 192, 192, 0.849);\n\n        border-radius: 2rem;\n        margin-top: 1rem;\n        margin-bottom: 1rem;\n    }\n</style>"]}]}